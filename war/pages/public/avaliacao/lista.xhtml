<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      
      >

    <ui:composition template="../../layout/template.xhtml">
      <ui:param name="aba" value="avaliacoes" />
    
    	    
    
    	<ui:define name="pageTitle"><h:outputText value="#{msg['page.title.lista.avaliacao']}" /></ui:define>
    	
    	<f:metadata>
            <f:event type="preRenderView" listener="#{avaliacaoBean.reset}" />
        </f:metadata>
        
        <ui:define name="sidebar">
    	   <ui:include src="menu.xhtml" >
    	        <ui:param name="comando" value="lista" />
    	   </ui:include>     
    	</ui:define>
    	
		<ui:define name="content">
		
		
		<div style="border-bottom: 1px solid #E5E5E5;">
					<h3>	<small> <h:outputText value="#{msg['lista.avaliacao.informacao']}" /></small></h3>
		 </div>
			
			
		<h:messages />	
			<h:form >
				<h:dataTable value="#{avaliacaoBean.dmAvaliacoes}" var="avaliacao" styleClass="table table-hover">
				<!--  
					<h:column>
						<f:facet name="header"><h:outputText value="#{msg['label.id']}" /></f:facet>
						<h:outputText outcome="editar" value="#{avaliacao.id}" />
                		
	                </h:column>
				-->
					<h:column>
						<f:facet name="header"><h:outputText value="#{msg['label.avaliacao.organizacao']}" /></f:facet>
						<h:outputText value="#{avaliacao.organizacao.nome}" title="#{msg['label.editar']} #{avaliacao.organizacao.nome}"/>
                	
	                </h:column>
	                
	                
	                <h:column>
						<f:facet name="header"><h:outputText value="#{msg['label.avaliacao.nivel_transparencia']}" /></f:facet>
						<h:outputText value="#{avaliacao.nivelTransparencia}" />
	                </h:column>
	                
	                <h:column>
						<f:facet name="header"><h:outputText value="#{msg['label.avaliacao.download']}" /></f:facet>
						
						 
						<h:outputLink  value="/serve?blob-key=#{avaliacao.resultado}" >
                			#{msg['label.avaliacao.resultado']}
                		</h:outputLink><br/>
                		
                		<h:outputLink  value="/serve?blob-key=#{avaliacao.declaracao}" >
                			#{msg['label.avaliacao.declaracao']}
                		</h:outputLink>
						
						
	                </h:column>
	                
	                <h:column>
						<f:facet name="header"><h:outputText value="#{msg['label.avaliacao.escopo']}" /></f:facet>
						<h:link outcome="editar" value="#{avaliacao.escopo}" title="#{msg['label.editar']} #{avaliacao.organizacao.nome}" >
						    <f:param name="id" value="#{avaliacao.id}" />
						</h:link>
					</h:column>
					
					<h:column>
						<f:facet name="header"><h:outputText value="#{msg['label.avaliacao.datavalidade']}" /></f:facet>
						<h:outputText value="#{avaliacao.dataValidade}">
						   <f:convertDateTime pattern="d/M/yyyy" />
					</h:outputText>
	                </h:column>
	                
	                <h:column>
						<f:facet name="header"><h:outputText value="#{msg['label.avaliacao.avaliador']}" /></f:facet>
						<h:outputText value="#{avaliacao.avaliador.nome}"/>
				   </h:column>
	                
				</h:dataTable>
				
				<h:panelGrid columns="1">
					<h:commandButton action="#{avaliacaoBean.atualizar}" value="#{msg['button.atualizar']}" styleClass="btn btn-success" />
				</h:panelGrid>
			</h:form>
			
		</ui:define>
    </ui:composition>
</html>